name: solr-query
version: 0.3.6.0
synopsis: Solr query EDSL
description: A typed, finally tagless Solr query EDSL.
category: DSLs
author: Mitchell Rosen
maintainer: mitchellwrosen@gmail.com
github: Sentenai/solr-query
license: BSD3
copyright: 2016 Sentenai, Inc.

flags:
  with-constraints:
    description: Depend on constraints
    default: False
    manual: False

ghc-options: -Wall

default-extensions:
  - ConstraintKinds
  - DataKinds
  - DeriveFunctor
  - ExistentialQuantification
  - FlexibleContexts
  - FlexibleInstances
  - GADTs
  - GeneralizedNewtypeDeriving
  - InstanceSigs
  - KindSignatures
  - LambdaCase
  - MultiParamTypeClasses
  - NoImplicitPrelude
  - OverloadedStrings
  - PatternSynonyms
  - PolyKinds
  - RankNTypes
  - ScopedTypeVariables
  - StandaloneDeriving
  - TypeFamilies
  - TypeOperators

dependencies:
  - base        >= 4.7     && < 5
  - base-compat >= 0.9.1
  - old-locale                < 1.1
  - semigroups  >= 0.3     && < 0.19
  - text        >= 1.0     && < 1.3
  - time        >= 1.1.2.0 && < 1.7

library:
  source-dirs: src
  other-modules:
    - Builder
    - Solr.Prelude
    - Solr.Query.Lucene.Class
    - Solr.Query.Lucene.Expr.Class
    - Solr.Query.Lucene.Expr.Impl.Final
    - Solr.Query.Lucene.Expr.Impl.Initial.Typed
    - Solr.Query.Lucene.Expr.Impl.Initial.Untyped
    - Solr.Query.Lucene.Expr.Type
    - Solr.Query.Lucene.Impl.Final
    - Solr.Query.Lucene.Impl.Initial
    - Solr.Query.Param
    - Solr.Query.Param.Local
  dependencies:
    - uniplate >= 1.3 && < 1.7
  when:
    condition: flag(with-constraints)
    cpp-options: -DWITH_CONSTRAINTS
    dependencies:
      - constraints >= 0.6 && < 0.9

tests:
  spec:
    source-dirs: test
    main: Spec.hs
    dependencies:
      - hspec
      - mtl
      - QuickCheck
      - quickcheck-instances
      - solr-query
      - uniplate

  doctest:
    main: test/DocTest.hs
    dependencies:
      - doctest >= 0.11
      - solr-query
